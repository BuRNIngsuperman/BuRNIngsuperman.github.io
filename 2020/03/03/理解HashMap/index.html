<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
<title>深入理解HashMap - BurningCode&#39;s Blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



    <meta name="description" content="最近为了准备面试看了一些面经，发现集合的问题问的比较多，尤其是HashMap的底层实现原理。之前学习集合的时候只知道怎么用HashMap，因此写了这篇博客记录一下关于集合类HashMap的底层原理及相关应用。">
<meta name="keywords" content="Java,集合">
<meta property="og:type" content="article">
<meta property="og:title" content="深入理解HashMap">
<meta property="og:url" content="https://jinqiuyang.top/2020/03/03/理解HashMap/index.html">
<meta property="og:site_name" content="BurningCode&#39;s Blog">
<meta property="og:description" content="最近为了准备面试看了一些面经，发现集合的问题问的比较多，尤其是HashMap的底层实现原理。之前学习集合的时候只知道怎么用HashMap，因此写了这篇博客记录一下关于集合类HashMap的底层原理及相关应用。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://jinqiuyang.top/images/og_image.png">
<meta property="og:updated_time" content="2020-03-03T11:50:08.874Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="深入理解HashMap">
<meta name="twitter:description" content="最近为了准备面试看了一些面经，发现集合的问题问的比较多，尤其是HashMap的底层实现原理。之前学习集合的时候只知道怎么用HashMap，因此写了这篇博客记录一下关于集合类HashMap的底层原理及相关应用。">
<meta name="twitter:image" content="https://jinqiuyang.top/images/og_image.png">







<link rel="icon" href="/images/favicon.svg">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    

    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.svg" alt="深入理解HashMap" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item" href="/">首页</a>
                
                <a class="navbar-item" href="/archives/">归档</a>
                
                <a class="navbar-item" href="/categories/">分类</a>
                
                <a class="navbar-item" href="/tags/">标签</a>
                
                <a class="navbar-item" href="/about/">关于</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="BurningCode GitHub" href="https://github.com/BuRNIngsuperman">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                <a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;">
                    <i class="fas fa-list-ul"></i>
                </a>
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-9-widescreen has-order-2 column-main"><div class="card">
    
    <div class="card-content article ">
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <i class="fas fa-angle-double-right"></i>深入理解HashMap
            
        </h1>
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2020-03-03T11:42:37.000Z"><i class="far fa-calendar-alt">&nbsp;</i>2020-03-03</time>
                
                <time class="level-item has-text-grey is-hidden-mobile" datetime="2020-03-03T11:50:08.874Z"><i class="far fa-calendar-check">&nbsp;</i>2020-03-03</time>
                
                
                <div class="level-item">
                <i class="far fa-folder-open has-text-grey"></i>&nbsp;
                <a class="has-link-grey -link" href="/categories/Java基础/">Java基础</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    <i class="far fa-clock"></i>&nbsp;
                    
                    
                    15 分钟 读完 (大约 2205 个字)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span>次访问
                </span>
                
            </div>
        </div>
        
        <div class="content">
            <p>最近为了准备面试看了一些面经，发现集合的问题问的比较多，尤其是HashMap的底层实现原理。之前学习集合的时候只知道怎么用HashMap，因此写了这篇博客记录一下关于集合类HashMap的底层原理及相关应用。<a id="more"></a></p>
<h2 id="HashMap底层原理"><a href="#HashMap底层原理" class="headerlink" title="HashMap底层原理"></a>HashMap底层原理</h2><p>HashMap的底层数据结构在JDK1.8中是由数组、链表和红黑树实现的。它是基于Hash表的概念存储数据的。它是实现了集合的Map接口。</p>
<p>初始情况下，一般是由数组作为hash表中的桶(bin)，所有HashCode相同的键值会存放在同一个桶中，其中桶内的结构是采用链表结构。但是当桶内的结点个数大于预定的阈值8时，桶内的数据结构就会变为红黑树，这样会加快桶内数据的查询时间。</p>
<p>至于为什么阈值会设置为8就会有很多考虑，通常我们理解就是当结点阈值为8时，红黑树的查找时间复杂度为O(lg8) = o(3)，而链表的平均查找时间复杂度为O(8/2)=O(4)，这时使用红黑树会加快查询速度。</p>
<p>Collections的synchronizedMap方法使HashMap具有同步的能力，或者使用ConcurrentHashMap。</p>
<h3 id="HashMap的put-的方法"><a href="#HashMap的put-的方法" class="headerlink" title="HashMap的put()的方法"></a>HashMap的put()的方法</h3><p>查看HashMap的源码，对put()方法进行分析</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">public</span> V <span class="hljs-title">put</span><span class="hljs-params">(K key, V value)</span> </span>&#123;</span><br><span class="line">     <span class="hljs-keyword">return</span> putVal(hash(key), key, value, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="hljs-comment">/**</span></span><br><span class="line"><span class="hljs-comment">  * Implements Map.put and related methods.</span></span><br><span class="line"><span class="hljs-comment">  *</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@param</span> hash hash for key</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@param</span> key the key</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@param</span> value the value to put</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@param</span> onlyIfAbsent if true, don't change existing value</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@param</span> evict if false, the table is in creation mode.</span></span><br><span class="line"><span class="hljs-comment">  * <span class="hljs-doctag">@return</span> previous value, or null if none</span></span><br><span class="line"><span class="hljs-comment">  */</span></span><br><span class="line"> <span class="hljs-function"><span class="hljs-keyword">final</span> V <span class="hljs-title">putVal</span><span class="hljs-params">(<span class="hljs-keyword">int</span> hash, K key, V value, <span class="hljs-keyword">boolean</span> onlyIfAbsent,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">                <span class="hljs-keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">     Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="hljs-keyword">int</span> n, i;</span><br><span class="line">     <span class="hljs-comment">//判断Hash中数组为空,就重新初始化数组</span></span><br><span class="line">     <span class="hljs-keyword">if</span> ((tab = table) == <span class="hljs-keyword">null</span> || (n = tab.length) == <span class="hljs-number">0</span>)</span><br><span class="line">         n = (tab = resize()).length;</span><br><span class="line">     <span class="hljs-comment">//根据键的hash值利用散列表分配数组，如果数组为空则直接放入包含键值对的结点</span></span><br><span class="line">     <span class="hljs-keyword">if</span> ((p = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == <span class="hljs-keyword">null</span>)</span><br><span class="line">         tab[i] = newNode(hash, key, value, <span class="hljs-keyword">null</span>);</span><br><span class="line">     <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">         Node&lt;K,V&gt; e; K k;</span><br><span class="line">         <span class="hljs-comment">//根据key相等确定链表的头结点相等，就作替换</span></span><br><span class="line">         <span class="hljs-keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">             ((k = p.key) == key || (key != <span class="hljs-keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">             e = p;</span><br><span class="line">         <span class="hljs-comment">// 结构为红黑树就插入树中</span></span><br><span class="line">         <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (p <span class="hljs-keyword">instanceof</span> TreeNode)</span><br><span class="line">             e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="hljs-keyword">this</span>, tab, hash, key, value);</span><br><span class="line">         <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">             <span class="hljs-comment">// 将Node插入合适的位置</span></span><br><span class="line">             <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> binCount = <span class="hljs-number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                 <span class="hljs-keyword">if</span> ((e = p.next) == <span class="hljs-keyword">null</span>) &#123;</span><br><span class="line">                     p.next = newNode(hash, key, value, <span class="hljs-keyword">null</span>);</span><br><span class="line">                     <span class="hljs-keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="hljs-number">1</span>) <span class="hljs-comment">// -1 for 1st</span></span><br><span class="line">                         treeifyBin(tab, hash);</span><br><span class="line">                     <span class="hljs-keyword">break</span>;</span><br><span class="line">                 &#125;</span><br><span class="line">                 <span class="hljs-keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                     ((k = e.key) == key || (key != <span class="hljs-keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                     <span class="hljs-keyword">break</span>;</span><br><span class="line">                 p = e;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="hljs-keyword">if</span> (e != <span class="hljs-keyword">null</span>) &#123; <span class="hljs-comment">// existing mapping for key</span></span><br><span class="line">             V oldValue = e.value;</span><br><span class="line">             <span class="hljs-keyword">if</span> (!onlyIfAbsent || oldValue == <span class="hljs-keyword">null</span>)</span><br><span class="line">                 e.value = value;</span><br><span class="line">             afterNodeAccess(e);</span><br><span class="line">             <span class="hljs-keyword">return</span> oldValue;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     ++modCount;</span><br><span class="line">     <span class="hljs-keyword">if</span> (++size &gt; threshold)</span><br><span class="line">         resize();</span><br><span class="line">     afterNodeInsertion(evict);</span><br><span class="line">     <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><strong>步骤①</strong>：若哈希table为null，或长度为0，则做一次扩容操作；<br><strong>步骤②</strong>：根据index找到目标bucket后，若当前bucket上没有结点，那么直接新增一个结点，赋值给该bucket；<br><strong>步骤③</strong>：若当前bucket上有链表，且头结点就匹配，那么直接做替换即可；<br><strong>步骤④</strong>：若当前bucket上的是树结构，则转为红黑树的插入操作；<br><strong>步骤⑤</strong>：若步骤①、②、③、④都不成立，则对链表做遍历操作。<br>  a) 若链表中有结点匹配，则做value替换；<br>  b）若没有结点匹配，则在链表末尾追加。同时，执行以下操作：<br>    i) 若链表长度大于<code>TREEIFY_THRESHOLD</code>，则执行红黑树转换操作；<br>    ii) 若<strong>条件i)</strong> 不成立，则执行扩容resize()操作。<br>以上5步都执行完后，再看当前Map中存储的k-v对的数量是否超出了<strong><code>threshold</code></strong>，若超出，还需再次扩容。</p>
<h3 id="根据key值找到散列表中的索引"><a href="#根据key值找到散列表中的索引" class="headerlink" title="根据key值找到散列表中的索引"></a>根据key值找到散列表中的索引</h3><h4 id="计算key的hash值"><a href="#计算key的hash值" class="headerlink" title="计算key的hash值"></a>计算key的hash值</h4><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hash</span><span class="hljs-params">(Object key)</span> </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">int</span> h;</span><br><span class="line">    <span class="hljs-keyword">return</span> (key == <span class="hljs-keyword">null</span>) ? <span class="hljs-number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="hljs-number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们根据key的hashCode方法得出HashCode值作为输入得到hash值，这采取了一种高位运算的算法。</p>
<p>从以上知识点，我们可以得到一个<strong>推论</strong>：<br><strong>对于两个对象，若其hashCode相同，那么两个对象的hash值就一定相同。</strong></p>
<p>一般情况下，HashCode的值是根据对象的内存地址得出来的。</p>
<p>这里还牵涉到另外一个知识点。对于HashMap中key的类型，必须满足以下的条件：<br>若两个对象逻辑相等，那么他们的hashCode一定相等，反之却不一定成立。</p>
<p>例如对于String对象，它的HashCode实现就是根据内容来实现的。所以equals相等内容的对象HashCode值就相等。</p>
<h4 id="取模操作"><a href="#取模操作" class="headerlink" title="取模操作"></a>取模操作</h4><p>我们根据key的hash值获得相应的数组索引操作是根据取模得出来的。取模操作是应用在put方法中</p>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(n - <span class="hljs-number">1</span>) &amp; hash <span class="hljs-comment">//hash表长度与hash值做与运算</span></span><br></pre></td></tr></table></figure>
<p>将HashMap的数组长度-1与hash值做<strong>与</strong>运算，这样做不仅效果和取模操作差不多，而且还大大提高了性能。</p>
<p>这里的操作也和为什么设置HashMap的长度为2的幂次方有关。假如HashCode的倒数第二第三位从0变成了1，但是运算的结果都是1001。也就是说，当HashMap长度为10的时候，有些index结果的出现几率会更大，而有些index结果永远不会出现（比如0111）！</p>
<p>这样，显然不符合<strong>Hash算法均匀分布</strong>的原则。</p>
<p>反观长度16或者其他2的幂，Length-1的值是所有二进制位全为1，这种情况下，index的结果等同于HashCode后几位的值。只要输入的HashCode本身分布均匀，Hash算法的结果就是均匀的</p>
<h3 id="处理散列表中的碰撞冲突"><a href="#处理散列表中的碰撞冲突" class="headerlink" title="处理散列表中的碰撞冲突"></a>处理散列表中的碰撞冲突</h3><p>我们在每个bucket数组中都以链表或者红黑树的数据结构存放。在同一个bucket中存放的数据量较少的时候，我们会采用链表的结构存放，在数据量较大时，会采用红黑树的数据结构存放。</p>
<h2 id="HashMap中hash算法中几个问题"><a href="#HashMap中hash算法中几个问题" class="headerlink" title="HashMap中hash算法中几个问题"></a>HashMap中hash算法中几个问题</h2><figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// 重新计算hash值    </span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hash</span><span class="hljs-params">(Object key)</span> </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">int</span> h;</span><br><span class="line">        <span class="hljs-keyword">return</span> (key == <span class="hljs-keyword">null</span>) ? <span class="hljs-number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="hljs-number">16</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">//计算Hash数组中bucket位置</span></span><br><span class="line">(n - <span class="hljs-number">1</span>) &amp; hash</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个哈希算法中：</p>
<p>^ 表示按异或运算，只要位不同就为1，不然为0</p>
<p><code>&gt;&gt;&gt;</code>无符号右移，右边补0</p>
</blockquote>
<p>为什么要用无符号右移16位后做异或运算的解答和为什么HashMap长度要是2的幂次方的长度这里有个非常好的解答</p>
<p><a href="https://www.cnblogs.com/zxporz/p/11204233.html" target="_blank" rel="noopener">Hash算法的一些问题</a></p>
<h2 id="HashMap和HashTable的区别"><a href="#HashMap和HashTable的区别" class="headerlink" title="HashMap和HashTable的区别"></a>HashMap和HashTable的区别</h2><p>HashTable和HashMap同样是基于哈希表实现的，同样每个元素都是一个key-value对，但是在解决链表冲突问题上，HashMap在JDK8.0上是使用单链表或者红黑树来解决的，而HashTable只使用单链表。</p>
<h3 id="继承的父类不同"><a href="#继承的父类不同" class="headerlink" title="继承的父类不同"></a>继承的父类不同</h3><p>HahshMap继承自AbstractMap类，而HashTable继承自Dictionary类，但是两者都实现了Map接口</p>
<h3 id="线程安全性不同"><a href="#线程安全性不同" class="headerlink" title="线程安全性不同"></a>线程安全性不同</h3><p>HashMap不是线程同步的</p>
<p>如果集合应用中不需要线程安全，那么推荐使用HashMap；如果需要高度的线程安全，那么推荐使用<code>java.util.concurrentHashMap</code>来代替HashTable。</p>
<h3 id="key和value是否可以为空"><a href="#key和value是否可以为空" class="headerlink" title="key和value是否可以为空"></a>key和value是否可以为空</h3><h3 id="Hash值不同"><a href="#Hash值不同" class="headerlink" title="Hash值不同"></a>Hash值不同</h3><p>在HashTable的底层代码中，Hash值是直接使用对象的HashCode方法得出的，而HashMap则利用对象的HashCode方法重新计算了Hash值</p>
<h2 id="Java中的Serialization机制和transient关键字"><a href="#Java中的Serialization机制和transient关键字" class="headerlink" title="Java中的Serialization机制和transient关键字"></a>Java中的Serialization机制和transient关键字</h2><p>简单来说，Java中的Serialization机制就是指类或者基本的数据类型持久化(persistence)到数据流中(Stream)中，包括文件、字节流、网络数据流。</p>
<p>Java中实现Serialiazation主要依靠两个类:ObjectOutputStream和ObjectInputStream。他们是JavaIO系统里OutputStream和InputStream的子类。既然他们是JavaIO的子类，那么就可以像操作流一样操作他们。</p>
<p><a href="https://www.iteye.com/blog/zzy1943-634418" target="_blank" rel="noopener">Java的Serialization机制</a></p>
<p><a href="https://blog.csdn.net/flynetcn/article/details/2142020" target="_blank" rel="noopener">Java的关键字transient</a></p>
<h2 id="静态内部类的加载时机"><a href="#静态内部类的加载时机" class="headerlink" title="静态内部类的加载时机"></a>静态内部类的加载时机</h2><ol>
<li>外部类初次加载，会初始化静态变量、静态代码块、静态方法，但不会加载内部类和静态内部类。</li>
<li>实例化外部类，调用外部类的静态方法、静态变量，则外部类必须先进行加载，但只加载一次。</li>
<li>直接调用静态内部类时，外部类不会加载</li>
</ol>

        </div>
        
            <ul class="post-copyright">
            <li><strong>本文标题：</strong><a href="https://jinqiuyang.top/2020/03/03/理解HashMap/">深入理解HashMap</a></li>
            <li><strong>本文作者：</strong><a href="https://jinqiuyang.top">BurningCode</a></li>
            <li><strong>本文链接：</strong><a href="https://jinqiuyang.top/2020/03/03/理解HashMap/">https://jinqiuyang.top/2020/03/03/理解HashMap/</a></li>
            <li><strong>发布时间：</strong>2020-03-03</li>
            <li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
            </li>
            </ul>
        
        
        <hr style="height:1px;margin:1rem 0">
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <i class="fas fa-tags has-text-grey"></i>&nbsp;
                    <a class="has-link-grey -link" href="/tags/Java/">Java</a>,&nbsp;<a class="has-link-grey -link" href="/tags/集合/">集合</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>





<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2020/03/03/深入理解Object/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">深入理解Object</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2020/03/03/链表、栈与队列/">
                <span class="level-item">链表、栈与队列</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">评论</h3>
        
<div id="valine-thread" class="content"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
    new Valine({
        el: '#valine-thread' ,
        notify: false,
        verify: false,
        app_id: 'Gxs5txGP2z6Ypi7xkX2wzcdm-gzGzoHsz',
        app_key: 'PGjapsDlHlD942ByeOVYOeSQ',
        placeholder: '欢迎一起交流讨论...'
    });
</script>

    </div>
</div>

</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level" style="margin-bottom:1rem">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-96x96 has-mb-6" src="/images/avatar.jpg" alt="BurningCode">
                    
                    
                    <p class="is-size-4 is-block">
                        BurningCode
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        software engineer&amp;Developer
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>Suzhou, China</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level menu-list is-mobile" style="margin-bottom:1rem">
            <div class="level-item has-text-centered is-marginless">
                <a href="/archives/">
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        11
                    </p>
                </a>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <a href="/categories/">
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        7
                    </p>
                </a>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <a href="/tags/">
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        11
                    </p>
                </a>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/BuRNIngsuperman" target="_blank">
                <i class="fab fa-github"></i>&nbsp;&nbsp;关注我</a>
        </div>
        
        
    </div>
</div>

    
        
<div class="card widget column-left is-sticky" id="toc" style="max-height: 600px;overflow: auto">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                目录
            </h3>
            <ul class="menu-list"><li>
        <a class="is-flex" href="#HashMap底层原理">
        <span class="has-mr-6">1</span>
        <span>HashMap底层原理</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#HashMap的put-的方法">
        <span class="has-mr-6">1.1</span>
        <span>HashMap的put()的方法</span>
        </a></li><li>
        <a class="is-flex" href="#根据key值找到散列表中的索引">
        <span class="has-mr-6">1.2</span>
        <span>根据key值找到散列表中的索引</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#计算key的hash值">
        <span class="has-mr-6">1.2.1</span>
        <span>计算key的hash值</span>
        </a></li><li>
        <a class="is-flex" href="#取模操作">
        <span class="has-mr-6">1.2.2</span>
        <span>取模操作</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#处理散列表中的碰撞冲突">
        <span class="has-mr-6">1.3</span>
        <span>处理散列表中的碰撞冲突</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#HashMap中hash算法中几个问题">
        <span class="has-mr-6">2</span>
        <span>HashMap中hash算法中几个问题</span>
        </a></li><li>
        <a class="is-flex" href="#HashMap和HashTable的区别">
        <span class="has-mr-6">3</span>
        <span>HashMap和HashTable的区别</span>
        </a><ul class="menu-list"><li>
        <a class="is-flex" href="#继承的父类不同">
        <span class="has-mr-6">3.1</span>
        <span>继承的父类不同</span>
        </a></li><li>
        <a class="is-flex" href="#线程安全性不同">
        <span class="has-mr-6">3.2</span>
        <span>线程安全性不同</span>
        </a></li><li>
        <a class="is-flex" href="#key和value是否可以为空">
        <span class="has-mr-6">3.3</span>
        <span>key和value是否可以为空</span>
        </a></li><li>
        <a class="is-flex" href="#Hash值不同">
        <span class="has-mr-6">3.4</span>
        <span>Hash值不同</span>
        </a></li></ul></li><li>
        <a class="is-flex" href="#Java中的Serialization机制和transient关键字">
        <span class="has-mr-6">4</span>
        <span>Java中的Serialization机制和transient关键字</span>
        </a></li><li>
        <a class="is-flex" href="#静态内部类的加载时机">
        <span class="has-mr-6">5</span>
        <span>静态内部类的加载时机</span>
        </a></li></ul>
        </div>
    </div>
</div>


    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
        </div>
    
</div>

                
            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.svg" alt="深入理解HashMap" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2021 BurningCode&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                共<span id="busuanzi_value_site_uv">0</span>个访客
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                        
                        <i class="fab fa-creative-commons"></i>&nbsp;<i class="fab fa-creative-commons-by"></i>&nbsp;<i class="fab fa-creative-commons-nc"></i>&nbsp;<i class="fab fa-creative-commons-sa"></i>&nbsp;
                        
                    </a>
                </p>
                
                <p class="control">
                    <a class="button is-white is-large" target="_blank" title="Burning GitHub" href="https://github.com/BuRNIngsuperman">
                        
                        <i class="fab fa-github"></i>&nbsp;
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>